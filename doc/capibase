#!/bin/sh
# \
exec tclsh "$0" ${1+"$@"}
# -*- tcl -*-
# ------------------------
# generate a node description for the C API man pages.

package require Pool_Base

cd html/capi
set files [glob *.html]

puts "# -*- tcl -*-"
puts "# c api reference (automatically generated at [::pool::date::nowTime])"
puts ""
puts "node trf_capi \{"
puts "\ttitle       \{Trf: The C API\}"
puts "\tshortTitle  \{C API\}"
puts "\tdescription \{The C level API\}"
puts "\tparent      trf_home"
puts ""
puts "\tcontents \{"

puts "\t\tbullet_list \{"

foreach f [lsort $files] {
    set stem [file rootname $f]
    puts "\t\t\tli \[link _ [list $stem] [list capi/$f]\]"
}

puts "\t\t\}"
puts "\t\}"
puts "\}"
