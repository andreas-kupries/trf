# -*- tcl -*-
# Commands covered:	crc-zlib
#
# This file contains a collection of tests for one or more of the commands
# the TRF extension. Sourcing this file into Tcl runs the tests and generates
# output for errors.  No output means no errors were found.
#
# Copyright (c) 1996 Andreas Kupries (a.kupries@westend.com)
#
# See the file "license.terms" for information on usage and redistribution
# of this file, and for a DISCLAIMER OF ALL WARRANTIES.
#
# $Id$

if {[string compare test [info procs test]] == 1} then {source defs}


test crc-zlib-1.0 {argument errors} {
    catch {crc-zlib} msg
    set msg
} {crc-zlib: source, destination missing}


test crc-zlib-1.1 {argument errors} {
    catch {crc-zlib x} msg
    set msg
} {crc-zlib: wrong # args}



test crc-zlib-2.0 {crc-zlib} {
    puts -nonewline [set ma [memchan]] {hello world}
    seek $ma 0

    crc-zlib  $ma [set mb [memchan]]
    seek $mb 0

    hex  -mode encode $mb [set mc [memchan]]
    seek $mc 0

    set res [read -nonewline $mc]

    close $ma
    close $mb
    close $mc

    set res
} {85114A0A}
