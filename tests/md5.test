# -*- tcl -*-
# Commands covered:	md5
#
# This file contains a collection of tests for one or more of the commands
# the TRF extension. Sourcing this file into Tcl runs the tests and generates
# output for errors.  No output means no errors were found.
#
# Copyright (c) 1996 Andreas Kupries (a.kupries@westend.com)
#
# See the file "license.terms" for information on usage and redistribution
# of this file, and for a DISCLAIMER OF ALL WARRANTIES.
#
# $Id$

if {[string compare test [info procs test]] == 1} then {source defs}


test md5-1.0 {argument errors} {
    catch {md5} msg
    set msg
} {md5: source, destination missing}


test md5-1.1 {argument errors} {
    catch {md5 x} msg
    set msg
} {md5: wrong # args}



test md5-2.0 {md5} {
    puts -nonewline [set ma [memchan]] {hello world}
    seek $ma 0

    md5  $ma [set mb [memchan]]
    seek $mb 0

    hex  -mode encode $mb [set mc [memchan]]
    seek $mc 0

    set res [read -nonewline $mc]

    close $ma
    close $mb
    close $mc

    set res
} {5EB63BBBE01EEED093CB22BB8F5ACDC3}


puts {
    Do you have a validation test suite for md5? (or knowlegde about such?)
    Please mail me, so that i'm able to include it here, making this code
    better.
}
