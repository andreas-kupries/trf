# -*- tcl -*-
# Commands covered:	adler
#
# This file contains a collection of tests for one or more of the commands
# the TRF extension. Sourcing this file into Tcl runs the tests and generates
# output for errors.  No output means no errors were found.
#
# Copyright (c) 1996 Andreas Kupries (a.kupries@westend.com)
#
# See the file "license.terms" for information on usage and redistribution
# of this file, and for a DISCLAIMER OF ALL WARRANTIES.
#
# $Id$

if {[string compare test [info procs test]] == 1} then {source defs}


test adler-1.0 {argument errors} {
    catch {adler} msg
    set msg
} {adler: source, destination missing}


test adler-1.1 {argument errors} {
    catch {adler x} msg
    set msg
} {adler: wrong # args}



test adler-2.0 {adler} {
    puts -nonewline [set ma [memchan]] {hello world}
    seek $ma 0

    adler  $ma [set mb [memchan]]
    seek $mb 0

    hex  -mode encode $mb [set mc [memchan]]
    seek $mc 0

    set res [read -nonewline $mc]

    close $ma
    close $mb
    close $mc

    set res
} {1A0B045D}
